# 리드 챗봇(Typebot) 통한 예약·상담 퍼널

**Task ID:** T-005
**Status:** DONE
**Importance:** MUST
**Complexity:** 5/10
**Urgency:** 9/10
**Dependencies:** T-002

## Description

### 설명
Typebot을 활용하여 예약 및 상담 신청을 위한 대화형 폼을 구축합니다. 사용자가 챗봇을 통해 이름, 연락처, 희망일 등을 입력하면, 해당 데이터는 Webhook을 통해 Supabase 데이터베이스에 자동으로 저장됩니다.

### 구현 상세
1.  **Typebot 플로우 설계**: Typebot.io 대시보드에서 예약 퍼널을 설계합니다. '이름 입력', '연락처 입력', '검사/상담 종류 선택', '희망 날짜/시간 선택' 등의 단계를 포함하는 대화형 플로우를 만듭니다.
2.  **Webhook 엔드포인트 생성**: Typebot에서 수집한 데이터를 수신할 Supabase Edge Function을 생성합니다. 이 함수는 POST 요청으로 들어온 JSON 데이터를 파싱하는 역할을 합니다.
3.  **데이터 저장 로직 구현**: Edge Function 내에서 수신한 데이터를 `patients` 테이블과 `reservations` 테이블에 저장하는 로직을 작성합니다. 동일한 연락처의 환자가 이미 존재할 경우 업데이트하는 로직도 고려합니다.
4.  **Typebot 설정 및 임베드**: Typebot 플로우의 마지막 단계에 Webhook을 설정하여 위에서 생성한 Edge Function의 URL로 데이터를 전송하도록 합니다. 생성된 Typebot 임베드 스크립트를 랜딩페이지의 CTA 버튼 클릭 시 나타나는 모달 또는 특정 섹션에 삽입합니다.

### 테스트 전략
1.  **퍼널 완료 테스트**: 사용자의 입장에서 Typebot 챗봇 플로우를 처음부터 끝까지 진행해 봅니다.
2.  **데이터 전송 및 저장 확인**: 플로우 완료 후, Supabase의 `patients`와 `reservations` 테이블에 방금 입력한 데이터가 정확하게 생성되었는지 확인합니다.
3.  **유효성 검사 테스트**: 전화번호나 이메일 형식이 잘못되었을 때 Typebot 내에서 적절한 유효성 검사 메시지가 표시되는지 확인합니다.
4.  **임베드 UI 테스트**: 랜딩페이지에 임베드된 Typebot이 데스크톱 및 모바일 환경에서 정상적으로 표시되고 동작하는지 확인합니다.

---

**Created:** 2025-07-29T04:44:49.562Z
**Updated:** 2025-08-05T14:01:09.819Z
